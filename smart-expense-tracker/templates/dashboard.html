{% extends "base.html" %}
{% block title %}Dashboard â€“ ExpenseIQ{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.min.css">
{% endblock %}

{% block content %}

<!-- â”€â”€ Stat Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="stats-grid" id="statsGrid">
  <div class="stat-card shimmer">
    <div class="stat-icon green">â‚¹</div>
    <div class="stat-info">
      <span class="stat-label">This Month</span>
      <span class="stat-value" id="monthTotal">â€”</span>
    </div>
  </div>
  <div class="stat-card shimmer">
    <div class="stat-icon blue">ğŸ“†</div>
    <div class="stat-info">
      <span class="stat-label">Avg Daily Spend</span>
      <span class="stat-value" id="avgDaily">â€”</span>
    </div>
  </div>
  <div class="stat-card shimmer">
    <div class="stat-icon purple">ğŸ†</div>
    <div class="stat-info">
      <span class="stat-label">Top Category</span>
      <span class="stat-value stat-value-sm" id="topCategory">â€”</span>
    </div>
  </div>
  <div class="stat-card shimmer">
    <div class="stat-icon orange">ğŸ“ˆ</div>
    <div class="stat-info">
      <span class="stat-label">vs Last Month</span>
      <span class="stat-value" id="vsLastMonth">â€”</span>
    </div>
  </div>
</div>

<!-- â”€â”€ Smart Analytics Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="analytics-row" id="analyticsRow">
  <div class="analytics-card">
    <div class="analytics-title">ğŸ”® Predicted Next Month</div>
    <div class="analytics-value" id="predicted">â€”</div>
    <div class="analytics-sub">Based on 3-month average</div>
  </div>
  <div class="analytics-card">
    <div class="analytics-title">ğŸ… Top 3 Categories</div>
    <div id="top3List" class="top3-list">â€”</div>
  </div>
  <div class="analytics-card">
    <div class="analytics-title">ğŸ¯ Budget Status</div>
    <div id="budgetStatus">
      <div style="color:var(--muted);font-size:.85rem">Loadingâ€¦</div>
    </div>
  </div>
</div>

<!-- â”€â”€ Charts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="charts-grid">
  <div class="card chart-card">
    <div class="card-header">
      <h3>ğŸ“‚ Category Breakdown</h3>
    </div>
    <div class="card-body"><canvas id="pieChart" height="260"></canvas></div>
  </div>
  <div class="card chart-card">
    <div class="card-header">
      <h3>ğŸ“ˆ Monthly Trend</h3>
    </div>
    <div class="card-body"><canvas id="lineChart" height="260"></canvas></div>
  </div>
</div>

<!-- â”€â”€ Recent Transactions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="card mt-4">
  <div class="card-header">
    <h3>ğŸ• Recent Transactions</h3>
    <a href="{{ url_for('expenses.list_expenses') }}" class="btn btn-outline btn-sm">View All</a>
  </div>
  <div class="card-body p-0" id="recentList">
    <div class="loading-placeholder">Loadingâ€¦</div>
  </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}